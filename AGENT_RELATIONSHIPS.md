# FitTelligence - Agent Relationships & Architecture

## ğŸ”„ Sequential Agent Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FITTELLIGENCE MULTI-AGENT SYSTEM                  â”‚
â”‚                   Sequential Information Flow                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

USER INPUT (Terminal / ADK UI)
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   demo.py    â”‚  â—„â”€â”€â”€ Orchestrates the entire flow
    â”‚              â”‚       â€¢ Collects client information
    â”‚              â”‚       â€¢ Manages sessions
    â”‚              â”‚       â€¢ Coordinates sequential execution
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ Shared Services:
           â”‚ â€¢ InMemorySessionService
           â”‚ â€¢ PreloadMemoryTool (in each agent)
           â”‚
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚              SEQUENTIAL AGENT EXECUTION                  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  STEP 1: Reception Agent                                 â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
    â”‚  â”‚ â€¢ Collects client information            â”‚            â”‚
    â”‚  â”‚ â€¢ Health & medical history               â”‚            â”‚
    â”‚  â”‚ â€¢ Fitness background                     â”‚            â”‚
    â”‚  â”‚ â€¢ Goals & preferences                    â”‚            â”‚
    â”‚  â”‚                                          â”‚            â”‚
    â”‚  â”‚ Tools:                                   â”‚            â”‚
    â”‚  â”‚ â€¢ Google Search                          â”‚            â”‚
    â”‚  â”‚ â€¢ PreloadMemoryTool                      â”‚            â”‚
    â”‚  â”‚                                          â”‚            â”‚
    â”‚  â”‚ Input:  User/client information          â”‚            â”‚
    â”‚  â”‚ Output: Comprehensive client profile     â”‚            â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â”‚ Context: Client intake data
                      â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  STEP 2: Body Scanner Agent                             â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
    â”‚  â”‚ â€¢ Analyzes body posture                  â”‚            â”‚
    â”‚  â”‚ â€¢ Movement pattern assessment            â”‚            â”‚
    â”‚  â”‚ â€¢ Mobility test recommendations          â”‚            â”‚
    â”‚  â”‚ â€¢ Kinesiology-based analysis             â”‚            â”‚
    â”‚  â”‚                                          â”‚            â”‚
    â”‚  â”‚ Tools:                                   â”‚            â”‚
    â”‚  â”‚ â€¢ Google Search (kinesiology research)   â”‚            â”‚
    â”‚  â”‚ â€¢ PreloadMemoryTool                      â”‚            â”‚
    â”‚  â”‚                                          â”‚            â”‚
    â”‚  â”‚ Input:  Client intake data               â”‚            â”‚
    â”‚  â”‚ Output: Body analysis & recommendations  â”‚            â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â”‚ Context: Intake + Body analysis
                      â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  STEP 3: PT Agent                                       â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
    â”‚  â”‚ â€¢ Creates personalized training plan     â”‚            â”‚
    â”‚  â”‚ â€¢ Exercise selection & programming       â”‚            â”‚
    â”‚  â”‚ â€¢ Sets, reps, rest periods               â”‚            â”‚
    â”‚  â”‚ â€¢ Progression planning                   â”‚            â”‚
    â”‚  â”‚ â€¢ Safety considerations                  â”‚            â”‚
    â”‚  â”‚                                          â”‚            â”‚
    â”‚  â”‚ Tools:                                   â”‚            â”‚
    â”‚  â”‚ â€¢ Google Search (exercise science)       â”‚            â”‚
    â”‚  â”‚ â€¢ PreloadMemoryTool                      â”‚            â”‚
    â”‚  â”‚                                          â”‚            â”‚
    â”‚  â”‚ Input:  Client + Body analysis           â”‚            â”‚
    â”‚  â”‚ Output: Comprehensive training plan      â”‚            â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â”‚ Context: Intake + Body + Training plan
                      â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  STEP 4: Nutrition Agent                                â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
    â”‚  â”‚ â€¢ Creates personalized nutrition plan    â”‚            â”‚
    â”‚  â”‚ â€¢ Meal planning                          â”‚            â”‚
    â”‚  â”‚ â€¢ Macronutrient calculations             â”‚            â”‚
    â”‚  â”‚ â€¢ Meal timing recommendations            â”‚            â”‚
    â”‚  â”‚ â€¢ Supplement guidance                    â”‚            â”‚
    â”‚  â”‚                                          â”‚            â”‚
    â”‚  â”‚ Tools:                                   â”‚            â”‚
    â”‚  â”‚ â€¢ Google Search (nutrition science)      â”‚            â”‚
    â”‚  â”‚ â€¢ PreloadMemoryTool                      â”‚            â”‚
    â”‚  â”‚                                          â”‚            â”‚
    â”‚  â”‚ Input:  Client + Body + Training plan    â”‚            â”‚
    â”‚  â”‚ Output: Comprehensive nutrition plan     â”‚            â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â”‚ Context: ALL previous information
                      â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  STEP 5: Head Coach Agent (COORDINATOR)                 â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
    â”‚  â”‚ â€¢ Coordinates all other agents           â”‚            â”‚
    â”‚  â”‚ â€¢ Integrates all information             â”‚            â”‚
    â”‚  â”‚ â€¢ Creates final comprehensive program    â”‚            â”‚
    â”‚  â”‚ â€¢ Ensures coherence & safety             â”‚            â”‚
    â”‚  â”‚                                          â”‚            â”‚
    â”‚  â”‚ Tools:                                   â”‚            â”‚
    â”‚  â”‚ â€¢ Google Search                          â”‚            â”‚
    â”‚  â”‚ â€¢ PreloadMemoryTool                      â”‚            â”‚
    â”‚  â”‚ â€¢ A2A Communication Tools:               â”‚            â”‚
    â”‚  â”‚   â”œâ”€ get_client_information()            â”‚            â”‚
    â”‚  â”‚   â”œâ”€ get_body_analysis()                 â”‚            â”‚
    â”‚  â”‚   â”œâ”€ get_training_plan()                 â”‚            â”‚
    â”‚  â”‚   â””â”€ get_nutrition_plan()                â”‚            â”‚
    â”‚  â”‚                                          â”‚            â”‚
    â”‚  â”‚ Input:  EVERYTHING from all agents       â”‚            â”‚
    â”‚  â”‚ Output: Final integrated program         â”‚            â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  FINAL PROGRAM   â”‚
              â”‚                  â”‚
              â”‚ â€¢ Training plan  â”‚
              â”‚ â€¢ Nutrition plan â”‚
              â”‚ â€¢ Integrated     â”‚
              â”‚ â€¢ Personalized   â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”— Agent-to-Agent Communication (A2A Protocol)

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  head_coach_agent    â”‚
                    â”‚  (Coordinator)       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                    Uses tools from:
                    shared/agent_communication.py
                               â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚              â”‚              â”‚
                â–¼              â–¼              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ get_client_      â”‚  â”‚get_body_ â”‚  â”‚get_train â”‚
    â”‚ information()    â”‚  â”‚analysis()â”‚  â”‚ing_plan()â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
             â”‚                 â”‚              â”‚
             â–¼                 â–¼              â–¼
    reception_agent   body_scanner_agent   pt_agent
             â”‚                 â”‚              â”‚
             â”‚                 â”‚              â”‚
             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ get_nutrition_plan()â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                    nutrition_agent
```

---

## ğŸ“Š Information Flow Summary

```
CLIENT INFORMATION
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Reception Agent  â”‚ â”€â”€â”€â–º Client Profile
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Body Scanner     â”‚ â”€â”€â”€â–º Client Profile + Body Analysis
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PT Agent         â”‚ â”€â”€â”€â–º Client + Body + Training Plan
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Nutrition Agent  â”‚ â”€â”€â”€â–º Client + Body + Training + Nutrition
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Head Coach Agent â”‚ â”€â”€â”€â–º FINAL INTEGRATED PROGRAM
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Key Relationships

### Sequential Dependency
- Each agent **depends on** previous agents' outputs
- Information flows **forward** only
- No circular dependencies

### Coordination
- **Head Coach Agent** can call other agents via A2A tools
- Other agents work **independently** but in sequence
- Shared context through message passing

### Tools Sharing
- **Built-in tools** (Google Search, PreloadMemoryTool) available to all
- **Custom A2A tools** only in head coach agent
- Tools enable specialization and coordination

---

## ğŸ’¡ Design Pattern

This system uses the **Sequential Pipeline Pattern**:

1. Each agent is a **specialized stage** in the pipeline
2. Information flows **unidirectionally** through stages
3. Each stage **enhances and builds upon** previous stages
4. Final stage (head coach) **integrates** all outputs
5. **Shared services** (session, memory) maintain consistency

---

**This architecture ensures clean separation of concerns while maintaining information flow and agent coordination.**

